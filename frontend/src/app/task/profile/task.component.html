<div *ngIf="task" class="container">
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <span class="task-title"><img class="task-img"
                                          src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Logo_Yandex.Tracker_2018.svg/768px-Logo_Yandex.Tracker_2018.svg.png"
                                          alt="">{{task.key}} {{task.title}}</span>
          </div>
          <hr class="task-title-separator">
          <div class="row task-nav-func">
            <div class="input-group mb-3 d-inline-flex align-items-center w-auto">
              <button class="btn btn-outline-secondary" type="button">Start work</button>
              <button class="btn btn-outline-secondary" type="button">Close</button>
              <button class="btn btn-outline-secondary" type="button">Edit</button>
              <div class="input-group-prepend">
                <button class="btn btn-outline-secondary dropdown-toggle task-nav-func-right-border-radius"
                        type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  More
                </button>
                <div class="dropdown-menu">
                  <a class="dropdown-item" href="#">Create sub-task</a>
                  <a class="dropdown-item" href="#">Vote</a>
                  <a class="dropdown-item" href="#">Log work</a>
                  <a class="dropdown-item" href="#">Comment</a>
                  <a class="dropdown-item" href="#">Start watching</a>
                  <div role="separator" class="dropdown-divider"></div>
                  <a class="dropdown-item" href="#">Remove</a>
                </div>
              </div>
            </div>
            <div class="input-group-prepend mb-3 w-auto export-function">
              <button class="btn btn-outline-secondary dropdown-toggle task-nav-func-right-border-radius" type="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="fas fa-file-download"></i> Export
              </button>
              <div class="dropdown-menu">
                <a class="dropdown-item" href="#">To Excel</a>
                <a class="dropdown-item" href="#">To CSV</a>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8">
              <span class="section-title"><i class="fas fa-angle-down"></i> Details </span>
              <hr class="no-margin-separator">
              <div class="row">
                <div class="col-lg-6 col-md-6">
                  <table class="table table-borderless">
                    <tbody>
                    <tr>
                      <td class="td-no-bottom-padding">Type:</td>
                      <td class="td-no-bottom-padding"><img src="../../../assets/ticket-type-icons/story_icon.png"
                                                            alt=""> {{task.type}}</td>
                    </tr>
                    <tr>
                      <td class="td-no-bottom-padding">Priority:</td>
                      <td class="td-no-bottom-padding"><img src="../../../assets/ticket-priority-icons/normal_icon.png"
                                                            alt=""> {{task.priority}}</td>
                    </tr>
                    <tr>
                      <td class="td-no-bottom-padding">Components/s:</td>
                      <td class="td-no-bottom-padding">
                        <span class="component">
                          <span *ngFor="let component of task.components; let isLast = last">
                            {{component.name}}{{isLast ? '' : ', '}}
                          </span>
                        </span>
                      </td>
                    </tr>
                    <tr>
                      <td class="td-no-bottom-padding">Labels:</td>
                      <td class="td-no-bottom-padding">
                        <span class="label badge badge-secondary"
                              *ngFor="let label of task.labels">{{label.name}}</span>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
                <div class="col-lg-6 col-md-6">
                  <table class="table table-borderless">
                    <tbody>
                    <tr>
                      <td class="td-no-bottom-padding">Status:</td>
                      <td class="td-no-bottom-padding"><span class="badge badge-primary">{{task.status}}</span></td>
                    </tr>
                    <tr>
                      <td class="td-no-bottom-padding">Resolution:</td>
                      <td class="td-no-bottom-padding">Unresolved</td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <span class="section-title"><i class="fas fa-angle-down"></i> Description</span>
              <hr class="no-margin-separator description-section">
              <div>
                {{task.description}}
              </div>
              <br>
              <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                  <a class="nav-link active" id="comments-tab" data-toggle="tab" href="#comments" role="tab"
                     aria-controls="comments" aria-selected="true">
                    Comments
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="history-tab" data-toggle="tab" href="#history" role="tab"
                     aria-controls="history" aria-selected="false">
                    History
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="worklog-tab" data-toggle="tab" href="#worklog" role="tab"
                     aria-controls="worklog" aria-selected="false">
                    Work log
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="activity-tab" data-toggle="tab" href="#activity" role="tab"
                     aria-controls="activity" aria-selected="false">
                    Activity
                  </a>
                </li>
              </ul>
              <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="comments" role="tabpanel" aria-labelledby="comments-tab">
                  <div class="comment-box">
                    <div class="comment-title">
                      <img class="user-icon margin-right-5" src="../../../assets/user-icons/user_icon.png" alt="">
                      <a href="">Yevhenii Deineka</a> added a comment - Yesterday
                      <a href="#" class="comment-function"><i
                        class="fas fas fa-ellipsis-h float-right comment-function"></i></a>
                    </div>
                    <div class="comment-body">
                      <p class="comment-body-text">Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut
                        fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.</p>
                    </div>
                  </div>
                  <div class="comment-box">
                    <div class="comment-title">
                      <img class="user-icon margin-right-5" src="../../../assets/user-icons/user_icon.png" alt="">
                      <a href="">Yevhenii Deineka</a> added a comment - 2 days ago
                      <a href="#" class="comment-function"><i class="fas fa-link float-right comment-function"></i></a>
                      <a href="#" class="comment-function"><i class="far fa-edit float-right comment-function"></i></a>
                      <a href="#" class="comment-function"><i class="far fa-trash-alt float-right"></i></a>
                    </div>
                    <div class="comment-body">
                      <p class="comment-body-text">Sed ut perspiciatis unde omnis iste natus error sit voluptatem
                        accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore
                        veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
                    </div>
                  </div>
                </div>
                <div class="tab-pane fade" id="history" role="tabpanel" aria-labelledby="history-tab">2</div>
                <div class="tab-pane fade" id="worklog" role="tabpanel" aria-labelledby="worklog-tab">3</div>
                <div class="tab-pane fade" id="activity" role="tabpanel" aria-labelledby="activity-tab">4</div>
              </div>
            </div>
            <div class="col-lg-4 col-md-4">
              <span class="section-title"><i class="fas fa-angle-down"></i> People</span>
              <hr class="no-margin-separator">
              <div class="row">
                <div class="col-lg-12 col-md-12">
                  <table class="table table-borderless">
                    <tbody>
                    <tr>
                      <td class="td-no-bottom-padding">Assignee:</td>
                      <td class="td-no-bottom-padding"><img class="user-icon" src="../../../assets/user-icons/user_icon.png"
                                                            alt="">
                        <span *ngIf="task.assignee">{{task.assignee!.firstName}} {{task.assignee!.lastName}}</span>
                      </td>
                    </tr>
                    <tr>
                      <td class="td-no-bottom-padding">Reporter:</td>
                      <td class="td-no-bottom-padding"><img class="user-icon" src="../../../assets/user-icons/user_icon.png"
                                                            alt="">
                        {{task.reporter!.firstName}} {{task.reporter!.lastName}}
                      </td>
                    </tr>
                    <tr>
                      <td class="td-no-bottom-padding">Votes:</td>
                      <td class="td-no-bottom-padding"><span class="badge badge-pill badge-primary">7</span><a
                        class="ticket-vote" href="#">Vote for this ticket</a></td>
                    </tr>
                    <tr>
                      <td class="td-no-bottom-padding">Watchers:</td>
                      <td class="td-no-bottom-padding">
                        <span class="badge badge-pill badge-primary">
                          {{watchersCount}}
                        </span>
                        <a *ngIf="!isCurrentUserWatcher" class="ticket-vote start-watching-function" (click)="watchTicket()">Start watching</a>
                        <a *ngIf="isCurrentUserWatcher" class="ticket-vote start-watching-function" (click)="stopWatchTicket()">Stop watching</a>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <span class="section-title"><i class="fas fa-angle-down"></i> Dates</span>
              <hr class="no-margin-separator">
              <div class="row">
                <div class="col-lg-12 col-md-12">
                  <table class="table table-borderless">
                    <tbody>
                    <tr>
                      <td class="td-no-bottom-padding">Created:</td>
                      <td class="td-no-bottom-padding">30/Jul/21 4:46 AM</td>
                    </tr>
                    <tr>
                      <td class="td-no-bottom-padding">Updated:</td>
                      <td class="td-no-bottom-padding">30/Jul/21 4:59 AM</td>
                    </tr>
                    <tr>
                      <td class="td-no-bottom-padding">Due date:</td>
                      <td class="td-no-bottom-padding">12/Aug/21 1:00 AM</td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <span class="section-title"><i class="fas fa-angle-down"></i> Time Tracking</span>
              <hr class="no-margin-separator">
              <div class="row">
                <div class="col-lg-12 col-md-12">
                  <table class="table table-borderless">
                    <tbody>
                    <tr>
                      <td width="60px">Estimated:</td>
                      <td style="vertical-align: middle">
                        <div class="progress">
                          <div class="progress-bar bg-primary" role="progressbar" style="width: 100%" aria-valuenow="25"
                               aria-valuemin="0" aria-valuemax="100">
                            24h
                          </div>
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td>Remaining:</td>
                      <td style="vertical-align: middle">
                        <div class="progress">
                          <div class="progress-bar bg-success" role="progressbar" style="width: 25%" aria-valuenow="25"
                               aria-valuemin="0" aria-valuemax="100">
                            5h
                          </div>
                        </div>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
